<!DOCTYPE html>
<html>
<head>
  <title>PharmaTransport - Subscription Required</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#0f172a;color:#e2e8f0;min-height:100vh;display:flex;flex-direction:column}
    .header{background:#1e293b;padding:16px 40px;border-bottom:1px solid #334155}
    .header h1{font-size:24px;font-weight:700}
    .container{flex:1;display:flex;align-items:center;justify-content:center;padding:40px}
    .card{background:#1e293b;border-radius:24px;padding:48px;max-width:560px;width:100%;text-align:center;border:1px solid #334155}
    .icon{width:80px;height:80px;background:linear-gradient(135deg,#dc2626 0%,#f97316 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;font-size:40px}
    .title{font-size:28px;font-weight:700;margin-bottom:12px}
    .subtitle{color:#94a3b8;font-size:16px;margin-bottom:32px;line-height:1.6}
    .status-box{background:#0f172a;border-radius:12px;padding:20px;margin-bottom:32px;border-left:4px solid #f59e0b}
    .status-row{display:flex;justify-content:space-between;margin-bottom:12px}
    .status-row:last-child{margin-bottom:0}
    .status-label{color:#94a3b8;font-size:14px}
    .status-value{font-weight:600;font-size:14px}
    .status-value.active{color:#22c55e}
    .status-value.inactive{color:#ef4444}
    .status-value.past_due{color:#f59e0b}
    .status-value.trialing{color:#3b82f6}
    .btn{display:inline-block;padding:16px 32px;border-radius:12px;font-size:16px;font-weight:600;text-decoration:none;transition:all .2s;cursor:pointer;border:none}
    .btn-primary{background:linear-gradient(135deg,#3b82f6 0%,#8b5cf6 100%);color:#fff}
    .btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(59,130,246,.4)}
    .btn-secondary{background:#334155;color:#e2e8f0;margin-left:12px}
    .btn-secondary:hover{background:#475569}
    .plans{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:32px;text-align:left}
    .plan{background:#0f172a;border-radius:12px;padding:20px;border:1px solid #334155}
    .plan.recommended{border-color:#3b82f6;box-shadow:0 0 20px rgba(59,130,246,.2)}
    .plan-name{font-size:14px;font-weight:600;color:#3b82f6;margin-bottom:8px}
    .plan-price{font-size:24px;font-weight:700;margin-bottom:4px}
    .plan-price span{font-size:14px;color:#64748b;font-weight:400}
    .plan-trucks{font-size:12px;color:#94a3b8}
    .fda-badge{display:inline-flex;align-items:center;gap:8px;background:#166534;color:#86efac;padding:8px 16px;border-radius:20px;font-size:12px;font-weight:600;margin-top:24px}
    .footer{text-align:center;padding:24px;color:#64748b;font-size:13px;border-top:1px solid #1e293b}
  </style>
</head>
<body>
  <div class="header">
    <h1>PharmaTransport</h1>
  </div>

  <div class="container">
    <div class="card">
      <div class="icon">!</div>
      <h2 class="title">Subscription Required</h2>
      <p class="subtitle">
        Your subscription is currently <%= @subscription_status || 'inactive' %>.
        To access the FDA-compliant cold chain dashboard, please activate or renew your subscription.
      </p>

      <div class="status-box">
        <div class="status-row">
          <span class="status-label">Current Plan</span>
          <span class="status-value"><%= @plan&.titleize || 'Free' %></span>
        </div>
        <div class="status-row">
          <span class="status-label">Status</span>
          <span class="status-value <%= @subscription_status %>"><%= @subscription_status&.titleize || 'Inactive' %></span>
        </div>
        <% if @tenant&.subscription_ends_at %>
        <div class="status-row">
          <span class="status-label">Expired</span>
          <span class="status-value"><%= @tenant.subscription_ends_at.strftime('%B %d, %Y') %></span>
        </div>
        <% end %>
      </div>

      <a href="/billing/plans" class="btn btn-primary">View Plans & Subscribe</a>
      <a href="/billing" class="btn btn-secondary">Manage Billing</a>

      <div class="plans">
        <div class="plan">
          <div class="plan-name">SMB</div>
          <div class="plan-price">$299<span>/mo</span></div>
          <div class="plan-trucks">Up to 25 trucks</div>
        </div>
        <div class="plan recommended">
          <div class="plan-name">Enterprise</div>
          <div class="plan-price">$999<span>/mo</span></div>
          <div class="plan-trucks">Up to 100 trucks</div>
        </div>
        <div class="plan">
          <div class="plan-name">Pfizer</div>
          <div class="plan-price">Custom</div>
          <div class="plan-trucks">Unlimited trucks</div>
        </div>
      </div>

      <div class="fda-badge">
        <span>FDA 21 CFR Part 11 Compliant</span>
      </div>
    </div>
  </div>

  <div class="footer">
    PharmaTransport | Enterprise Cold Chain Logistics | Contact: sales@pharmatransport.io
  </div>
</body>
</html>
